{"version":3,"sources":["images/check.svg","images/cross.svg","components/Footer.js","components/Header.js","components/Register.js","components/InfoTooltip.js","components/Login.js","contexts/currentUserContext.js","components/Card.js","components/Main.js","components/ProtectedRoute.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ImagePopup.js","utils/api.js","utils/utils.js","utils/auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Footer","className","Header","props","path","useLocation","pathname","loggedIn","email","onClick","onSignOut","to","Register","React","useState","password","userData","setUserData","handleChange","e","name","target","value","onSubmit","preventDefault","onRegister","onChange","type","placeholder","InfoTooltip","isOpen","alt","src","image","subscription","onClose","Login","onLogin","CurrentUserContext","createContext","Card","currentUser","useContext","isOwn","_id","card","owner","isLiked","likes","some","item","onCardClick","link","onCardLike","length","onCardDelete","Main","style","backgroundImage","avatar","onEditAvatar","onEditProfile","about","onAddPlace","noValidate","cards","map","key","ProtectedRoute","Component","component","PopupWithForm","title","children","EditProfilePopup","activity","setValue","inputName","useEffect","onUpdateUser","id","required","minLength","maxLength","pattern","EditAvatarPopup","inputAvatarRef","useRef","current","onUpdateAvatar","ref","AddPlacePopup","imageName","imageLink","ConfirmDeletePopup","selectedCard","ImagePopup","api","apiOptions","this","_baseUrl","baseUrl","_headers","headers","res","ok","json","Promise","reject","statusText","err","message","fetch","then","_handleResponse","catch","_handleResponseError","method","body","JSON","stringify","data","cardId","authorization","BASE_URL","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isImagePopupOpen","setImagePopupOpen","isInfoTooltipPopupOpen","setInfoTooltipPopupOpen","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setEmail","setMessage","checkImage","infoTooltipImage","setInfoTooltipImage","history","useHistory","closeAllPopups","token","jwt","localStorage","getItem","console","log","push","removeItem","all","getUserInfo","getInitialCards","Provider","exact","i","changeLikeCardStatus","newCard","newCards","c","response","setItem","authorize","crossImage","register","updateUserInfo","userInfo","updateAvatar","addCard","deleteCard","filter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","basename","process","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.68483f9e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/check.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/cross.4072126c.svg\";","import React from 'react';\r\n\r\nfunction Footer () {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nfunction Header (props) {\n\n  const path = useLocation().pathname;\n\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n      {props.loggedIn ?\n        <div className=\"header__container\">\n          <p className=\"header__user-email\">{props.email}</p>\n          <button className=\"header__logout-btn\" onClick={props.onSignOut}>Выйти</button>\n        </div>\n        :\n        <Link className=\"header__link\" to={(path === '/signup') ? '/signin' : '/signup'}>\n          {(path === '/signup') ? 'Войти' : 'Регистрация'}\n        </Link>}\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n\n  const [userData, setUserData] = React.useState({email: '', password: ''});\n\n  function handleChange (e) {\n    const name = e.target.name;\n    setUserData({...userData, [name]: e.target.value});\n  }\n\n  function handleSubmit (e) {\n    e.preventDefault();\n    props.onRegister(userData.password, userData.email);\n    setUserData({email: '', password: ''});\n  }\n\n  return (\n    <form className=\"form\" onSubmit={handleSubmit}>\n      <h4 className=\"form__title\">Регистрация</h4>\n      <input\n        onChange={handleChange}\n        className=\"form__input\"\n        value={userData.email}\n        name=\"email\"\n        type=\"email\"\n        placeholder=\"Email\"\n      />\n      <input\n        onChange={handleChange}\n        className=\"form__input\"\n        value={userData.password}\n        type=\"password\"\n        name=\"password\"\n        placeholder=\"Пароль\"\n      />\n      <input className=\"form__button\" type=\"submit\" value=\"Зарегистрироваться\"/>\n      <div className=\"form__wrapper\">\n        <p className=\"form__subscription\">Уже зарегистрированы?&ensp;</p>\n        <Link className=\"form__link\" to=\"/signin\">Войти</Link>\n      </div>\n    </form>\n  )\n}\n\nexport default Register;\n","import React from 'react';\n\nfunction InfoTooltip (props) {\n\n  return (\n    <section className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__wrapper\">\n        <img className=\"popup__picture\" alt=\"Картинка\" src={props.image}/>\n        <p className=\"popup__subscription\">{props.subscription}</p>\n        <button onClick={props.onClose} className=\"popup__close-button popup__close-button_up\" type=\"button\" />\n      </div>\n    </section>\n  )\n}\n\nexport default InfoTooltip;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Login(props) {\n\n  const [userData, setUserData] = React.useState({email: '', password: ''});\n\n  function handleChange (e) {\n    const name = e.target.name;\n    setUserData({...userData, [name]: e.target.value});\n  }\n\n  function handleSubmit (e) {\n    e.preventDefault();\n    props.onLogin(userData.password, userData.email);\n    setUserData({email: '', password: ''});\n  }\n\n  return (\n      <form className=\"form\" onSubmit={handleSubmit}>\n        <h4 className=\"form__title\">Вход</h4>\n        <input\n          onChange={handleChange}\n          value={userData.email}\n          name=\"email\"\n          className=\"form__input\"\n          type=\"email\"\n          placeholder=\"Email\"\n        />\n        <input\n          onChange={handleChange}\n          value={userData.password}\n          name=\"password\"\n          className=\"form__input\"\n          type=\"password\"\n          placeholder=\"Пароль\"\n        />\n        <input className=\"form__button\" type=\"submit\" value=\"Войти\"/>\n        <div className=\"form__wrapper\">\n          <p className=\"form__subscription\">Ещё не зарегистрированы?&ensp;</p>\n          <Link className=\"form__link\" to=\"/signup\">Регистрация</Link>\n        </div>\n      </form>\n  )\n}\n\nexport default Login;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\n\nfunction Card (props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = currentUser._id === props.card.owner._id;\n  const isLiked = props.card.likes.some(item => item._id === currentUser._id);\n\n  function handleClick () {\n    props.onCardClick(props.card);\n  }\n\n  return (\n  <div className=\"card\">\n    <img onClick={handleClick} className=\"card__image\" alt={`Фотография места ${props.card.name}`} src={props.card.link}/>\n    <div className=\"card__wrapper\">\n      <h3 className=\"card__subscription\">{props.card.name}</h3>\n      <div className=\"card__like-wrapper\">\n        <button onClick={() => {props.onCardLike(props.card)}} className={`card__like ${isLiked ? 'card__like_active' : ''}`} />\n        <span className=\"card__number-of-likes\">{props.card.likes.length}</span>\n      </div>\n      {isOwn && <button className=\"card__recycle-bin\" onClick={() => props.onCardDelete(props.card)}/>}\n    </div>\n  </div>\n  )\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\n\nfunction Main (props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar\" style={{ backgroundImage: `url(${currentUser.avatar})` }}>\n          <button onClick={props.onEditAvatar} className=\"profile__avatar-edit\"></button>\n        </div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button onClick={props.onEditProfile} className=\"profile__edit-btn\"></button>\n          <p className=\"profile__activity\">{currentUser.about}</p>\n        </div>\n        <button onClick={props.onAddPlace} className=\"profile__add-btn\" type=\"button\"></button>\n      </section>\n\n      <section className=\"popup popup_delete-card\">\n        <form className=\"popup__form\" noValidate>\n          <h4 className=\"popup__title popup__title_wihout-unput\">Вы уверены?</h4>\n          <input className=\"popup__button\" type=\"submit\" value=\"Да\"/>\n          <button className=\"popup__close-button\" type=\"button\"></button>\n        </form>\n      </section>\n\n      <section className=\"cards\">\n        {props.cards.map((card) => (\n          <Card\n            key={card._id}\n            card={card}\n            onCardClick={props.onCardClick}\n            onCardLike={props.onCardLike}\n            onCardDelete={props.onCardDelete}\n          />\n        ))}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/signin\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;\n","import React from 'react';\n\nfunction PopupWithForm (props) {\n  return (\n    <section className={`popup popup_${props.name} ${props.isOpen ? 'popup_opened' : ''}`}>\n      <form onSubmit={props.onSubmit} className=\"popup__form\" name={props.name}>\n        <h4 className=\"popup__title\">{props.title}</h4>\n        {props.children}\n        <input className=\"popup__button\" type=\"submit\" value={props.value} />\n        <button onClick={props.onClose} className=\"popup__close-button\" type=\"button\" />\n      </form>\n     </section>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\n\nfunction EditProfilePopup (props) {\n\n  const [value, setValue] = React.useState({name: '', activity: ''});\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleChange (e) {\n    const inputName = e.target.name;\n    setValue({...value, [inputName]: e.target.value})\n  }\n\n  function handleSubmit (e) {\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    props.onUpdateUser(value.name, value.activity)\n  }\n\n  React.useEffect(() => {\n    setValue({name: currentUser.name, activity: currentUser.about})\n  }, [currentUser, props.isOpen]);\n\n  return (\n    <PopupWithForm name=\"profile\" title=\"Редактировать профиль\" value=\"Сохранить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        value={value.name}\n        onChange={handleChange}\n        className=\"popup__input popup__form-name\"\n        type=\"text\"\n        name=\"name\"\n        id=\"name-input\"\n        placeholder=\"Имя\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        pattern=\"[А-ЯЁа-яёA-Za-z -]{1,}\"\n      />\n      <span className=\"popup__error\" id=\"name-input-error\"></span>\n      <input\n        value={value.activity}\n        onChange={handleChange}\n        className=\"popup__input popup__form-activity\"\n        type=\"text\"\n        name=\"activity\"\n        id=\"activity-input\"\n        placeholder=\"Занятие\"\n        required\n        minLength=\"2\"\n        maxLength=\"40\"\n        pattern=\"[А-ЯЁа-яёA-Za-z -]{1,}\"\n      />\n      <span className=\"popup__error\" id=\"activity-input-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup (props) {\n\n  const inputAvatarRef = React.useRef();\n\n  React.useEffect(() => {\n    inputAvatarRef.current.value = '';\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateAvatar(inputAvatarRef.current.value);\n  }\n\n  return (\n    <PopupWithForm name=\"edit-avatar\" title=\"Обновить аватар\" value=\"Сохранить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={inputAvatarRef}\n        className=\"popup__input popup__form-image-link\"\n        type=\"url\"\n        name=\"avatar\"\n        placeholder=\"Ссылка на новый аватар\"\n        required\n      />\n      <span className=\"popup__error\" id=\"link-input-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup (props) {\n\n  const imageName = React.useRef();\n  const imageLink = React.useRef();\n\n  React.useEffect(() => {\n    imageName.current.value = '';\n    imageLink.current.value = '';\n  }, [props.isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onAddPlace({name: imageName.current.value, link: imageLink.current.value});\n    imageName.current.value = '';\n    imageLink.current.value = '';\n    props.onClose();\n  }\n\n  return (\n    <PopupWithForm name=\"add-card\" title=\"Новое место\" value=\"Добавить\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n    >\n      <input\n        ref={imageName}\n        className=\"popup__input popup__form-image-title\"\n        type=\"text\"\n        name=\"name\"\n        id=\"title-input\"\n        placeholder=\"Название\"\n        required\n        minLength=\"1\"\n        maxLength=\"30\"\n      />\n      <span className=\"popup__error\" id=\"title-input-error\"></span>\n      <input\n        ref={imageLink}\n        className=\"popup__input popup__form-image-link\"\n        type=\"url\"\n        name=\"link\"\n        id=\"link-input\"\n        placeholder=\"Ссылка на картинку\"\n        required\n      />\n      <span className=\"popup__error\" id=\"link-input-error\"></span>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction ConfirmDeletePopup (props) {\n\n  const {isOpen, onClose, onCardDelete, selectedCard} = props;\n\n  function handleSubmit (e) {\n    e.preventDefault();\n\n    onCardDelete(selectedCard);\n  }\n\n  return (\n    <PopupWithForm name=\"delete-card\" title=\"Вы уверены?\" value=\"Да\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    />\n\n  );\n}\n\nexport default ConfirmDeletePopup;\n","import React from 'react';\n\nfunction ImagePopup (props) {\n  return (\n  <section className={`popup popup_photo ${props.isOpen ? 'popup_opened' : ''}`}>\n    <div className=\"popup__container\">\n      <img className=\"popup__image\" alt={`Фотография места ${props.selectedCard.name}`} src={props.selectedCard.link} />\n      <p className=\"popup__image-subscription\">{props.selectedCard.name}</p>\n      <button onClick={props.onClose} className=\"popup__close-button\" type=\"button\" />\n    </div>\n  </section>\n  );\n}\n\nexport default ImagePopup;\n"," import {apiOptions} from './utils.js'\n\n class Api {\n  constructor({apiOptions}) {\n    this._baseUrl = apiOptions.baseUrl;\n    this._headers = apiOptions.headers;\n  }\n\n  _handleResponse(res){\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.statusText)\n    }\n  }\n\n  _handleResponseError(err){\n\n    return Promise.reject(err.message)\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers,\n    })\n      .then(this._handleResponse)\n      .catch(this._handleResponseError);\n  }\n\n  getUserInfo () {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers,\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError);\n  }\n\n  updateUserInfo (name, about) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers:\n        this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError);\n  }\n\n  addCard (data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers:\n        this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError);\n  }\n\n  deleteCard (cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers:\n        this._headers,\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError);\n  }\n\n  changeLikeCardStatus (cardId, isLiked) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: `${isLiked ? 'DELETE' : 'PUT'}`,\n      headers:\n        this._headers,\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError);\n  }\n\n  updateAvatar (imageLink) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers:\n        this._headers,\n      body: JSON.stringify({\n        avatar: imageLink,\n      })\n    })\n    .then(this._handleResponse)\n    .catch(this._handleResponseError);\n  }\n}\n\nexport const api = new Api({apiOptions});\n\n","export const apiOptions = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-13',\n  headers: {\n    authorization: 'cf96bb80-c649-4955-9349-d912842c7606',\n    'Content-Type': 'application/json'\n  }\n}\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (password, email) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({password, email})\n  })\n  .then((res) => res.json())\n  .then((res) => {\n    if (res.data) {\n      return res\n    } else {\n      return Promise.reject(res);\n    }\n  })\n  .catch((err) => {\n    console.log(err)\n    throw err;\n  })\n};\n\nexport const authorize = (password, email) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({password, email})\n  })\n  .then((response => response.json()))\n  .then((res) => {\n    if (res.token){\n      localStorage.setItem('jwt', res.token);\n      return res;\n    } else {\n      return Promise.reject(res);\n    }\n  })\n  .catch(err => {\n    console.log(err.message);\n    throw err;\n  })\n};\n\nexport const isTokenValid = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Authorization\" : `Bearer ${token}`\n    }\n  })\n  .then(res => res.json())\n  .then(res => {\n    if (res.data) {\n      return res.data;\n    } else {\n      return Promise.reject(res);\n    }\n  })\n  .catch(err => {\n    console.log(err.message);\n    throw err;\n  })\n}\n","import React from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Footer from './Footer';\nimport Header from './Header';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport Login from './Login';\nimport Main from './Main';\nimport ProtectedRoute from './ProtectedRoute';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\nimport ImagePopup from './ImagePopup';\nimport { api } from '../utils/api';\nimport { register, authorize, isTokenValid } from '../utils/auth';\nimport { CurrentUserContext } from '../contexts/currentUserContext';\nimport checkImage from '../images/check.svg';\nimport crossImage from '../images/cross.svg';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setInfoTooltipPopupOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({name: '', about: ''});\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [message, setMessage] = React.useState('');\n  const [infoTooltipImage, setInfoTooltipImage] = React.useState(checkImage);\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      isTokenValid(jwt)\n      .then((res) => {\n          setEmail(res.email);\n          setLoggedIn(true);\n          history.push('/');\n      })\n      .catch(() => {\n        localStorage.removeItem('jwt');\n        setLoggedIn(false);\n      })\n    }\n  },[history])\n\n  React.useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(data => {\n        setCurrentUser(data[0]);\n        setCards(data[1]);\n      })\n      .catch(err => console.log(`Ошибка: ${err}`));\n  },[])\n\n  function handleEditAvatarClick () {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick () {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick () {\n    setAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups () {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setConfirmDeletePopupOpen(false);\n    setImagePopupOpen(false)\n    setInfoTooltipPopupOpen(false);\n  }\n\n  function handleCardClick (card) {\n    setSelectedCard(card);\n    setImagePopupOpen(true);\n  }\n\n  function handleUpdateUser (name, activity) {\n    api.updateUserInfo(name, activity)\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Ошибка: ${err}`));\n  }\n\n  function handleUpdateAvatar (avatar) {\n    api.updateAvatar(avatar)\n      .then((userInfo) => {\n        setCurrentUser(userInfo);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Ошибка: ${err}`));\n  }\n\n  function handleCardDeleteClick(card) {\n    setSelectedCard(card);\n    setConfirmDeletePopupOpen(true);\n  }\n\n  function hadleCardDelete(card) {\n\n    api.deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => {\n          return  c._id !== card._id;\n        })\n        setCards(newCards);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Ошибка: ${err}`));\n  }\n\n  function handleCardLike(card) {\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(err => console.log(`Ошибка: ${err}`));\n  }\n\n  function handleAddPlaceSubmit (card) {\n    api.addCard(card)\n      .then((newCard) => {\n        setCards([newCard,...cards])\n      })\n      .catch(err => console.log(`Ошибка: ${err}`));\n  }\n\n  function handleRegisterSubmit (password, email) {\n    register(password, email)\n      .then((res) => {\n          if (res) {\n            setMessage('Вы успешно зарегистрировались!');\n            setInfoTooltipImage(checkImage);\n            setInfoTooltipPopupOpen(true);\n            history.push('/signin');\n            return;\n          }\n      })\n      .catch(() => {\n        setMessage('Что-то пошло не так! Попробуйте ещё раз.');\n        setInfoTooltipImage(crossImage);\n        setInfoTooltipPopupOpen(true);\n      })\n  }\n\n  function handleLoginSubmit (password, email) {\n    authorize(password, email)\n      .then(() => {\n          setEmail(email);\n          setLoggedIn(true);\n          history.push('/');\n          return;\n      })\n      .catch(() => {\n        setMessage('Что-то пошло не так! Попробуйте ещё раз.');\n        setInfoTooltipImage(crossImage);\n        setInfoTooltipPopupOpen(true);\n      })\n  }\n\n  function handleSignOut () {\n    setEmail('');\n    localStorage.removeItem('jwt');\n    setLoggedIn(false);\n  }\n\n  return (\n    // <HashRouter>\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header email={email} loggedIn={loggedIn} onSignOut={handleSignOut}/>\n        <Switch>\n        <ProtectedRoute exact path=\"/\" loggedIn={loggedIn}\n            component={Main}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDeleteClick}\n            cards={cards}\n          />\n          <Route path=\"/signin\">\n            <Login onLogin={handleLoginSubmit}/>\n          </Route>\n          <Route path=\"/signup\">\n            <Register onRegister={handleRegisterSubmit}/>\n          </Route>\n        </Switch>\n\n        <InfoTooltip\n          isOpen={isInfoTooltipPopupOpen}\n          subscription={message}\n          image={infoTooltipImage}\n          onClose={closeAllPopups}\n        />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <ConfirmDeletePopup\n          isOpen={isConfirmDeletePopupOpen}\n          onClose={closeAllPopups}\n          onCardDelete={hadleCardDelete}\n          selectedCard={selectedCard}\n        />\n\n        <ImagePopup selectedCard={selectedCard} onClose={closeAllPopups} isOpen={isImagePopupOpen}/>\n\n        <Footer />\n      </CurrentUserContext.Provider>\n    </div>\n    // </HashRouter>\n  );\n}\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}